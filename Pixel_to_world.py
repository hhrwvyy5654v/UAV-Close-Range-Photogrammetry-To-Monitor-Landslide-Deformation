import numpy as np

# 相机内参
fx = 596.34925072 # 焦距
fy = 596.49697012
cx = 400.35710334 # 图像中心点
cy = 300.47081541

# 相机外参
R = np.array([[ 0.99842466,-0.00670601,-0.05570656],
            [0.00938999,0.99880033,0.04805963],
            [0.05531744,-0.048507,0.99728985]]) # 旋转矩阵
t = np.array([-204.38036057,-143.87274813,458.71932771]) # 平移向量

# 像素坐标
u = 306.5
v = 481.75

# 将像素坐标转换为归一化相机坐标
x_c = (u - cx) / fx
y_c = (v - cy) / fy
z_c = 1.0

# 将归一化相机坐标转换为世界坐标
X = R[0][0]*x_c + R[0][1]*y_c + R[0][2]*z_c + t[0]
Y = R[1][0]*x_c + R[1][1]*y_c + R[1][2]*z_c + t[1]
Z = R[2][0]*x_c + R[2][1]*y_c + R[2][2]*z_c + t[2]

# 输出世界坐标
print('World coordinate: ({:.3f}, {:.3f}, {:.3f})'.format(X, Y, Z))
